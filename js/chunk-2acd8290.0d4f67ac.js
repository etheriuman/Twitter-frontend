(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2acd8290"],{"035c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("div",{staticClass:"column-left column"},[r("Navbar",{on:{"after-submit":e.handleAfterSubmit}})],1),r("div",{staticClass:"column-main column"},[r("div",{staticClass:"card main-content"},[r("ul",{staticClass:"list-group list-group-flush"},[r("PageHead",{attrs:{user:e.user}}),r("UserProfile",{directives:[{name:"show",rawName:"v-show",value:!e.userIsLoading&&!e.tweetsIsLoading,expression:"!userIsLoading&&!tweetsIsLoading"}],attrs:{"initial-user":e.user},on:{afterAddFollowed:e.handleAfterAddFollowed,afterCancelFollowed:e.handleAfterCencelFollowed,afterSubmit:e.afterHandleSubmit}}),e._l(e.tweets,(function(t){return r("TweetCard",{key:t.id,attrs:{"initial-tweet":t},on:{"after-add-like":e.handleAfterAddLike,"after-delete-like":e.handleAfterDeleteLike}})}))],2)])]),r("div",{staticClass:"column-right column"},[r("Recommendation")],1)])},n=[],s=r("5530"),i=r("1da1"),o=(r("d81d"),r("96cf"),r("d178")),c=r("cb06"),l=r("9f73"),u=r("8f7b"),d=r("74ca"),f=r("4cce"),h=r("604d"),w=r("2fa3"),m={name:"UserLikes",components:{Navbar:o["a"],PageHead:c["a"],UserProfile:l["a"],TweetCard:u["a"],Recommendation:d["a"]},data:function(){return{user:{},tweets:[],userIsLoading:!0,tweetsIsLoading:!0}},methods:{fetchUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].get({userId:e});case 3:a=r.sent,n=a.data,t.user=n,t.userIsLoading=!1,r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),t.userIsLoading=!1,console.log(r.t0),w["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},fetchTweetsLiked:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].getLikedTweets({userId:e});case 3:a=r.sent,n=a.data,t.tweets=n,t.tweetsIsLoading=!1,r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),t.tweetsIsLoading=!1,console.log(r.t0),w["a"].fire({icon:"error",title:"無法取得使用者推文資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},handleAfterSubmit:function(){console.log("refetch"),this.fetchTweetsLiked()},handleAfterAddLike:function(e){console.log("add like"),this.tweets=this.tweets.map((function(t){return t.id===e?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:!0,likesNumber:t.likesNumber+1}):t}))},handleAfterDeleteLike:function(e){console.log("delete like"),this.tweets=this.tweets.map((function(t){return t.id===e?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:!1,likesNumber:t.likesNumber-1}):t}))},handleAfterReply:function(e){console.log("replied"),console.log(e);var t=e.tweetId;this.tweets=this.tweets.map((function(e){return e.id===t?(console.log("this tweet is",e),Object(s["a"])(Object(s["a"])({},e),{},{repliesNumber:e.repliesNumber+1})):e}))},handleAfterAddFollowed:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h["a"].addFollow({payLoad:e});case 3:if(a=r.sent,n=a.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.user.isFollowed=!0,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),w["a"].fire({icon:"error",title:"無法將使用者加入追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleAfterCencelFollowed:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h["a"].removeFollow({followId:e});case 3:if(a=r.sent,n=a.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.user.isFollowed=!1,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),w["a"].fire({icon:"error",title:"無法將使用者移除追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},afterHandleSubmit:function(){var e=this.$route.params.id;this.fetchUser(e)}},beforeRouteUpdate:function(e,t,r){var a=e.params.id;this.fetchUser(a),this.fetchTweetsLiked(a),r()},created:function(){var e=this.$route.params.id;this.fetchUser(e),this.fetchTweetsLiked(e)}},p=m,b=(r("1985"),r("2877")),g=Object(b["a"])(p,a,n,!1,null,"e8ee4ba6",null);t["default"]=g.exports},1985:function(e,t,r){"use strict";r("2285")},2285:function(e,t,r){}}]);
//# sourceMappingURL=chunk-2acd8290.0d4f67ac.js.map