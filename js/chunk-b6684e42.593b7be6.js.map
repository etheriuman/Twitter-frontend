{"version":3,"sources":["webpack:///./src/views/UserTweets.vue?54d1","webpack:///src/views/UserTweets.vue","webpack:///./src/views/UserTweets.vue?76ab","webpack:///./src/views/UserTweets.vue","webpack:///./src/views/UserTweets.vue?c0e8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleAfterSubmit","attrs","user","directives","name","rawName","value","userIsLoading","tweetsIsLoading","expression","afterHandleSubmit","_l","tweet","key","id","handleAfterAddLike","handleAfterDeleteLike","staticRenderFns","components","Navbar","PageHead","UserProfile","TweetCard","Recommendation","data","tweets","computed","methods","console","log","fetchTweets","map","tweetId","isLiked","likesNumber","handleAfterReply","replyData","repliesNumber","fetchUser","userId","watch","recommendation","forEach","parseInt","isFollowed","beforeRouteUpdate","next","created","component"],"mappings":"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","file":"js/chunk-b6684e42.593b7be6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"column-left column\"},[_c('Navbar',{on:{\"after-submit\":_vm.handleAfterSubmit}})],1),_c('div',{staticClass:\"column-main column\"},[_c('div',{staticClass:\"card main-content\"},[_c('ul',{staticClass:\"list-group list-group-flush\"},[_c('PageHead',{attrs:{\"user\":_vm.user}}),_c('UserProfile',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.userIsLoading&&!_vm.tweetsIsLoading),expression:\"!userIsLoading&&!tweetsIsLoading\"}],attrs:{\"initial-user\":_vm.user},on:{\"afterSubmit\":_vm.afterHandleSubmit}}),_vm._l((_vm.tweets),function(tweet){return _c('TweetCard',{key:tweet.id,attrs:{\"initial-tweet\":tweet},on:{\"after-add-like\":_vm.handleAfterAddLike,\"after-delete-like\":_vm.handleAfterDeleteLike}})})],2)])]),_c('div',{staticClass:\"column-right column\"},[_c('Recommendation')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main\">\n    <div class=\"column-left column\">\n      <Navbar @after-submit=\"handleAfterSubmit\" />\n    </div>\n    <div class=\"column-main column\">\n      <div class=\"card main-content\">\n        <ul class=\"list-group list-group-flush\">\n          <PageHead :user=\"user\" />\n          <UserProfile\n            v-show=\"!userIsLoading&&!tweetsIsLoading\"\n            :initial-user=\"user\"\n            @afterSubmit=\"afterHandleSubmit\"\n          />\n          <TweetCard\n            v-for=\"tweet in tweets\"\n            :key=\"tweet.id\"\n            :initial-tweet=\"tweet\"\n            @after-add-like=\"handleAfterAddLike\"\n            @after-delete-like=\"handleAfterDeleteLike\"\n          />\n        </ul>\n      </div>\n    </div>\n    <div class=\"column-right column\">\n      <Recommendation />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from './../components/Navbar'\nimport PageHead from './../components/PageHead'\nimport UserProfile from './../components/UserProfile'\nimport TweetCard from './../components/TweetCard'\nimport Recommendation from './../components/Recommendation'\nimport usersAPI from './../apis/users.js'\nimport { Toast } from './../utils/helpers.js'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: \"UserTweets\",\n  components: {\n    Navbar,\n    PageHead,\n    UserProfile,\n    TweetCard,\n    Recommendation,\n  },\n  data() {\n    return {\n      user: {},\n      tweets: [],\n      userIsLoading: true,\n      tweetsIsLoading: true,\n    }\n  },\n  computed: {\n    ...mapState(['recommendation'])\n  },\n  methods: {\n    async fetchUser(userId) {\n      try {\n        const {data} = await usersAPI.get({userId})\n        this.user = data\n        this.userIsLoading = false\n      } catch (error) {\n        this.userIsLoading = false\n        console.log (error)\n        Toast.fire ({\n          icon: 'error',\n          title: '無法取得使用者資料，請稍後再試'\n        })\n      }  \n    },\n    async fetchTweets(userId) {\n      try {\n        const {data} = await usersAPI.getTweets({userId})\n        this.tweets = data\n        this.tweetsIsLoading = false\n      } catch (error) {\n        this.tweetsIsLoading = false\n        console.log (error)\n        Toast.fire ({\n          icon: 'error',\n          title: '無法取得使用者推文資料，請稍後再試'\n        })\n      }\n    },\n    handleAfterSubmit() {\n      // 因為需要取得正確createdAt所以選擇重新fetch一次\n      console.log(\"refetch\")\n      this.fetchTweets()\n    },\n    handleAfterAddLike(tweetId) {\n      console.log(\"add like\")\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === tweetId) {\n          return {\n            ...tweet,\n            isLiked: true,\n            likesNumber: tweet.likesNumber + 1,\n          }\n        }\n        return tweet\n      })\n    },\n    handleAfterDeleteLike(tweetId) {\n      console.log(\"delete like\")\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === tweetId) {\n          return {\n            ...tweet,\n            isLiked: false,\n            likesNumber: tweet.likesNumber - 1,\n          }\n        }\n        return tweet\n      })\n    },\n    handleAfterReply(replyData) {\n      console.log(\"replied\")\n      console.log(replyData)\n      const { tweetId } = replyData\n      this.tweets = this.tweets.map((tweet) => {\n        if (tweet.id === tweetId) {\n          console.log(\"this tweet is\", tweet)\n          return {\n            ...tweet,\n            repliesNumber: tweet.repliesNumber + 1,\n          }\n        }\n        return tweet\n      })\n    },\n    afterHandleSubmit() {\n      const { id: userId } = this.$route.params\n      this.fetchUser(userId)\n    }\n  },\n  watch: {\n    recommendation(data) {\n      data.forEach(user => {\n        if (user.id === parseInt(this.user.id)) {\n          this.user = {\n            ...this.user,\n            isFollowed: user.isFollowed\n          }\n        }\n      })\n    }\n  },\n  //監聽切換頁面的事件\n  beforeRouteUpdate(to,from,next) {\n    const {id : userId} = to.params\n    this.fetchUser(userId)\n    this.fetchTweets(userId)\n    next()\n  },\n  created() {\n    const { id: userId } = this.$route.params\n    this.fetchUser(userId)\n    this.fetchTweets(userId)\n  },\n}\n</script>\n\n<style scoped>\n.main {\n  grid-template-columns: 220px 1fr 300px;\n  grid-template-areas: \"left main right\";\n}\n\n/* pad 尺寸 */\n@media screen and (max-width: 992px) {\n  .main {\n    grid-template-rows: calc(100% - 50px) 50px;\n    grid-template-columns: 1fr 300px;\n    grid-template-areas:\n      \"main right\"\n      \"left left\";\n  }\n}\n\n/* mobile 尺寸 */\n@media screen and (max-width: 768px) {\n  .main {\n    grid-template-rows: calc(100% - 50px) 50px;\n    grid-template-columns: 1fr 300px;\n    grid-template-areas:\n      \"main main\"\n      \"left left\";\n  }\n  .column-right {\n    display: none;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserTweets.vue?vue&type=template&id=9d09eb42&scoped=true&\"\nimport script from \"./UserTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./UserTweets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserTweets.vue?vue&type=style&index=0&id=9d09eb42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9d09eb42\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserTweets.vue?vue&type=style&index=0&id=9d09eb42&scoped=true&lang=css&\""],"sourceRoot":""}