(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3535888a"],{"4ad1":function(e,t,r){},"79dd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("div",{staticClass:"column-left column"},[r("Navbar",{on:{"after-submit":e.handleAfterSubmit}})],1),r("div",{staticClass:"column-main column"},[r("div",{staticClass:"card main-content"},[r("ul",{staticClass:"list-group list-group-flush"},[r("PageHead",{attrs:{user:e.user}}),r("UserProfile",{directives:[{name:"show",rawName:"v-show",value:!e.userIsLoading&&!e.tweetsIsLoading,expression:"!userIsLoading&&!tweetsIsLoading"}],attrs:{"initial-user":e.user},on:{afterAddFollowed:e.handleAfterAddFollowed,afterCancelFollowed:e.handleAfterCencelFollowed,afterSubmit:e.afterHandleSubmit}}),e._l(e.tweets,(function(t){return r("TweetCard",{key:t.id,attrs:{"initial-tweet":t},on:{"after-add-like":e.handleAfterAddLike,"after-delete-like":e.handleAfterDeleteLike}})}))],2)])]),r("div",{staticClass:"column-right column"},[r("Recommendation")],1)])},n=[],s=r("5530"),i=r("2909"),o=r("1da1"),c=(r("d81d"),r("96cf"),r("d178")),l=r("cb06"),u=r("9f73"),d=r("8f7b"),f=r("74ca"),h=r("4cce"),w=r("604d"),m=r("2fa3"),p={name:"UserReplies",components:{Navbar:c["a"],PageHead:l["a"],UserProfile:u["a"],TweetCard:d["a"],Recommendation:f["a"]},data:function(){return{user:{},tweets:[],userIsLoading:!0,tweetsIsLoading:!0}},methods:{fetchUser:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h["a"].get({userId:e});case 3:a=r.sent,n=a.data,t.user=n,t.userIsLoading=!1,r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),t.userIsLoading=!1,console.log(r.t0),m["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},fetchReplies:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h["a"].getRepliedTweets({userId:e});case 3:n=r.sent,s=n.data,(a=t.tweets).push.apply(a,Object(i["a"])(s)),t.tweetsIsLoading=!1,r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](0),t.tweetsIsLoading=!1,console.log(r.t0),m["a"].fire({icon:"error",title:"無法取得使用者推文回覆資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,9]])})))()},handleAfterSubmit:function(){console.log("refetch"),this.fetchTweetsLiked()},handleAfterAddLike:function(e){console.log("add like"),this.tweets=this.tweets.map((function(t){return t.id===e?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:!0,likesNumber:t.likesNumber+1}):t}))},handleAfterDeleteLike:function(e){console.log("delete like"),this.tweets=this.tweets.map((function(t){return t.id===e?Object(s["a"])(Object(s["a"])({},t),{},{isLiked:!1,likesNumber:t.likesNumber-1}):t}))},handleAfterReply:function(e){console.log("replied"),console.log(e);var t=e.tweetId;this.tweets=this.tweets.map((function(e){return e.id===t?(console.log("this tweet is",e),Object(s["a"])(Object(s["a"])({},e),{},{repliesNumber:e.repliesNumber+1})):e}))},handleAfterAddFollowed:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].addFollow({payLoad:e});case 3:if(a=r.sent,n=a.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.user.isFollowed=!0,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),m["a"].fire({icon:"error",title:"無法將使用者加入追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleAfterCencelFollowed:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].removeFollow({followId:e});case 3:if(a=r.sent,n=a.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.user.isFollowed=!1,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),m["a"].fire({icon:"error",title:"無法將使用者移除追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},afterHandleSubmit:function(){var e=this.$route.params.id;this.fetchUser(e)}},beforeRouteUpdate:function(e,t,r){var a=e.params.id;this.fetchUser(a),this.fetchReplies(a),r()},created:function(){var e=this.$route.params.id;this.fetchUser(e),this.fetchReplies(e)}},b=p,g=(r("7b94"),r("2877")),v=Object(g["a"])(b,a,n,!1,null,"0e2d9f44",null);t["default"]=v.exports},"7b94":function(e,t,r){"use strict";r("4ad1")}}]);
//# sourceMappingURL=chunk-3535888a.d705ff26.js.map