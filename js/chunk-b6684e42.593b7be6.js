(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6684e42"],{"68b6":function(e,t,s){},b2d0:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("div",{staticClass:"column-left column"},[s("Navbar",{on:{"after-submit":e.handleAfterSubmit}})],1),s("div",{staticClass:"column-main column"},[s("div",{staticClass:"card main-content"},[s("ul",{staticClass:"list-group list-group-flush"},[s("PageHead",{attrs:{user:e.user}}),s("UserProfile",{directives:[{name:"show",rawName:"v-show",value:!e.userIsLoading&&!e.tweetsIsLoading,expression:"!userIsLoading&&!tweetsIsLoading"}],attrs:{"initial-user":e.user},on:{afterSubmit:e.afterHandleSubmit}}),e._l(e.tweets,(function(t){return s("TweetCard",{key:t.id,attrs:{"initial-tweet":t},on:{"after-add-like":e.handleAfterAddLike,"after-delete-like":e.handleAfterDeleteLike}})}))],2)])]),s("div",{staticClass:"column-right column"},[s("Recommendation")],1)])},r=[],a=s("1da1"),i=s("5530"),c=(s("d81d"),s("159b"),s("96cf"),s("d178")),o=s("cb06"),u=s("9f73"),l=s("8f7b"),d=s("74ca"),f=s("4cce"),h=s("2fa3"),m=s("2f62"),w={name:"UserTweets",components:{Navbar:c["a"],PageHead:o["a"],UserProfile:u["a"],TweetCard:l["a"],Recommendation:d["a"]},data:function(){return{user:{},tweets:[],userIsLoading:!0,tweetsIsLoading:!0}},computed:Object(i["a"])({},Object(m["b"])(["recommendation"])),methods:{fetchUser:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,f["a"].get({userId:e});case 3:n=s.sent,r=n.data,t.user=r,t.userIsLoading=!1,s.next=14;break;case 9:s.prev=9,s.t0=s["catch"](0),t.userIsLoading=!1,console.log(s.t0),h["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,9]])})))()},fetchTweets:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,f["a"].getTweets({userId:e});case 3:n=s.sent,r=n.data,t.tweets=r,t.tweetsIsLoading=!1,s.next=14;break;case 9:s.prev=9,s.t0=s["catch"](0),t.tweetsIsLoading=!1,console.log(s.t0),h["a"].fire({icon:"error",title:"無法取得使用者推文資料，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,9]])})))()},handleAfterSubmit:function(){console.log("refetch"),this.fetchTweets()},handleAfterAddLike:function(e){console.log("add like"),this.tweets=this.tweets.map((function(t){return t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isLiked:!0,likesNumber:t.likesNumber+1}):t}))},handleAfterDeleteLike:function(e){console.log("delete like"),this.tweets=this.tweets.map((function(t){return t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isLiked:!1,likesNumber:t.likesNumber-1}):t}))},handleAfterReply:function(e){console.log("replied"),console.log(e);var t=e.tweetId;this.tweets=this.tweets.map((function(e){return e.id===t?(console.log("this tweet is",e),Object(i["a"])(Object(i["a"])({},e),{},{repliesNumber:e.repliesNumber+1})):e}))},afterHandleSubmit:function(){var e=this.$route.params.id;this.fetchUser(e)}},watch:{recommendation:function(e){var t=this;e.forEach((function(e){e.id===parseInt(t.user.id)&&(t.user=Object(i["a"])(Object(i["a"])({},t.user),{},{isFollowed:e.isFollowed}))}))}},beforeRouteUpdate:function(e,t,s){var n=e.params.id;this.fetchUser(n),this.fetchTweets(n),s()},created:function(){var e=this.$route.params.id;this.fetchUser(e),this.fetchTweets(e)}},b=w,p=(s("c62c"),s("2877")),g=Object(p["a"])(b,n,r,!1,null,"9d09eb42",null);t["default"]=g.exports},c62c:function(e,t,s){"use strict";s("68b6")}}]);
//# sourceMappingURL=chunk-b6684e42.593b7be6.js.map